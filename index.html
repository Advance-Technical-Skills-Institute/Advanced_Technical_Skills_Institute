<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>THE INSTITUTE ‚Äî Electrical & Welding Admissions</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --accent-red: #ff3b3b;
      --accent-red-soft: #ffe7e7;
      --accent-gradient: linear-gradient(90deg, #ff3b3b, #ff7070);
      --text-dark: #111827;
      --text-light: #6b7280;
      --bg-main: radial-gradient(circle at top left, #fff3f3, #f9fafb 40%, #ffffff 100%);
      --radius-xl: 26px;
      --transition-fast: 0.28s ease;
      --glass-light: rgba(255, 255, 255, 0.78);
      --glass-border: rgba(255, 255, 255, 0.9);
      --accent-green: #22c55e;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
      font-family: "Poppins", sans-serif;
      background: var(--bg-main);
      color: var(--text-dark);
      line-height: 1.7;
    }

    /* HEADER */
    header {
      position: sticky;
      top: 0;
      z-index: 100;
      padding: 12px 32px;
      background: rgba(255, 255, 255, 0.96);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid rgba(229, 231, 235, 0.8);
    }
    .brand-wrap {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .brand-wrap img {
      height: 38px;
      width: auto;
    }
    .brand-title {
      font-size: 18px;
      font-weight: 700;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      background: var(--accent-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .brand-sub {
      font-size: 10px;
      color: var(--text-light);
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    nav {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    nav a {
      font-size: 13px;
      color: #6b7280;
      text-decoration: none;
      padding: 6px 10px;
      border-radius: 999px;
      transition: var(--transition-fast);
    }
    nav a:hover {
      color: var(--accent-red);
      background: var(--accent-red-soft);
    }

    /* LANGUAGE SWITCHER */
    .lang-switch {
      position: relative;
    }
    .lang-button {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid rgba(34, 197, 94, 0.7);
      background: rgba(240, 253, 244, 0.95);
      cursor: pointer;
      font-size: 11px;
      font-weight: 600;
      color: #166534;
      box-shadow: 0 8px 20px rgba(34, 197, 94, 0.5);
    }
    .lang-button span {
      pointer-events: none;
    }
    .lang-button .lang-pill {
      padding: 2px 8px;
      border-radius: 999px;
      background: #bbf7d0;
      font-size: 10px;
      font-weight: 600;
    }
    .lang-button .caret {
      font-size: 9px;
      opacity: 0.85;
    }

    /* Blinking green accent */
    @keyframes blinkAccent {
      0% {
        box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7);
        border-color: rgba(34, 197, 94, 0.9);
      }
      50% {
        box-shadow: 0 0 0 8px rgba(34, 197, 94, 0);
        border-color: rgba(34, 197, 94, 0.4);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(34, 197, 94, 0);
        border-color: rgba(34, 197, 94, 0.9);
      }
    }
    .lang-button.blinking {
      animation: blinkAccent 1.4s infinite;
    }

    .lang-menu {
      position: absolute;
      right: 0;
      margin-top: 6px;
      background: rgba(255, 255, 255, 0.98);
      border-radius: 12px;
      border: 1px solid rgba(209, 213, 219, 0.9);
      box-shadow: 0 14px 32px rgba(148, 163, 184, 0.35);
      padding: 6px 6px;
      display: none;
      min-width: 150px;
      z-index: 120;
    }
    .lang-menu.visible {
      display: block;
    }
    .lang-menu button {
      width: 100%;
      text-align: left;
      border: none;
      background: transparent;
      padding: 6px 8px;
      border-radius: 8px;
      font-size: 11px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: #374151;
    }
    .lang-menu button:hover {
      background: #ecfdf5;
      color: #166534;
    }
    .lang-menu .lang-native {
      font-size: 10px;
      opacity: 0.9;
    }

    /* HERO / USPs ‚Äì light pink card */
    .hero {
      max-width: 1180px;
      margin: 0 auto;
      padding: 32px 24px 16px;
    }

    .usp-card {
      background: radial-gradient(circle at top left, #ffffff, #fff5f5);
      border-radius: 28px;
      padding: 20px 26px 18px;
      border: 1px solid #ffe2e2;
      box-shadow: 0 26px 60px rgba(248, 113, 113, 0.18);
    }
    .usp-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 4px;
      letter-spacing: 0.22em;
      text-transform: uppercase;
      text-align: center;
      color: #f43f5e;
    }
    .usp-sub {
      font-size: 12px;
      color: #6b7280;
      margin-bottom: 14px;
      text-align: center;
    }
    .usp-list {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 14px;
      font-size: 11px;
    }
    .usp-item {
      background: rgba(255, 255, 255, 0.96);
      border-radius: 20px;
      padding: 10px 14px;
      border: 1px solid #ffe0e0;
      box-shadow: 0 18px 40px rgba(248, 113, 113, 0.12);
      display: flex;
      align-items: flex-start;
      gap: 10px;
    }
    .usp-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #f43f5e;
      margin-top: 4px;
      flex-shrink: 0;
    }
    .usp-label {
      font-weight: 600;
      color: #111827;
      font-size: 12px;
      margin-bottom: 2px;
    }
    .usp-detail {
      font-size: 11px;
      color: #6b7280;
    }

    /* MAIN FLOW SECTION */
    section.flow {
      max-width: 1180px;
      margin: 38px auto 50px;
      padding: 28px 24px 0;
      border-top: 1px solid rgba(248, 113, 113, 0.26);
    }
    .section-label {
      font-size: 10px;
      letter-spacing: 0.20em;
      text-transform: uppercase;
      color: var(--accent-red);
      margin-bottom: 6px;
      text-align: center;
    }
    .section-title {
      font-size: 26px;
      font-weight: 600;
      margin-bottom: 6px;
      text-align: center;
    }
    .section-lede {
      font-size: 13px;
      color: var(--text-light);
      max-width: 680px;
      margin: 0 auto 22px;
      text-align: center;
    }

    .interactive-panel {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-bottom: 18px;
    }

    .step-heading {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: #9ca3af;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }
    .step-heading span {
      color: var(--accent-red);
      font-weight: 600;
    }

    .step-block {
      background: rgba(255,255,255,0.92);
      border-radius: 24px;
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      padding: 18px 18px 16px;
      box-shadow: 0 20px 46px rgba(148,163,184,0.4);
    }

    /* STEP 1: TRADE */
    .trade-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 14px;
      margin-top: 6px;
    }
    .trade-card {
      border-radius: 20px;
      border: 1px solid rgba(255, 148, 148, 0.9);
      background: var(--accent-gradient);
      color: #ffffff;
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      padding: 14px 14px 12px;
      cursor: pointer;
      transition: var(--transition-fast);
      box-shadow: 0 16px 34px rgba(248, 113, 113, 0.6);
    }
    .trade-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 22px 48px rgba(248, 113, 113, 0.85);
      border-color: #ffffff;
    }
    .trade-card.active {
      border-color: #ffffff;
      box-shadow: 0 26px 56px rgba(248,113,113,0.95);
    }
    .trade-name {
      font-size: 16px;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      margin-bottom: 5px;
      color: #ffffff;
    }
    .trade-tagline {
      font-size: 11px;
      color: rgba(255, 255, 255, 0.9);
    }

    /* STEP 2: PLANS */
    .plans-wrapper { margin-top: 2px; }
    .plans-inner {
      border-radius: 22px;
      background: rgba(255,255,255,0.98);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      padding: 14px 14px 12px;
      box-shadow: 0 20px 48px rgba(148,163,184,0.45);
    }
    .plans-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 12px;
      margin-top: 10px;
    }
    .plan-card {
      border-radius: 16px;
      background: rgba(255,255,255,0.98);
      border: 1px solid rgba(229,231,235,0.9);
      padding: 12px 12px 10px;
      cursor: pointer;
      transition: var(--transition-fast);
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 11px;
      box-shadow: 0 14px 32px rgba(148,163,184,0.25);
    }
    .plan-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 18px 40px rgba(148,163,184,0.38);
      border-color: #fecaca;
    }
    .plan-card.active {
      border-color: var(--accent-red);
      box-shadow: 0 22px 52px rgba(248,113,113,0.55);
    }
    .plan-duration {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: #9ca3af;
    }
    .plan-price {
      font-size: 17px;
      font-weight: 700;
      background: var(--accent-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .plan-note {
      font-size: 10px;
      color: #6b7280;
    }
    .plan-points {
      margin-top: 4px;
      padding-left: 14px;
      font-size: 10px;
      color: #4b5563;
    }
    .plan-points li {
      margin-bottom: 2px;
    }
    .plans-hint {
      font-size: 10px;
      color: #9ca3af;
      margin-top: 4px;
    }

    /* STEP 3: FORM */
    .form-card {
      border-radius: 20px;
      background: var(--glass-light);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      color: var(--text-dark);
      padding: 14px 14px 12px;
      box-shadow: 0 18px 40px rgba(148,163,184,0.45);
      font-size: 11px;
      display: none;
    }
    .form-card.visible {
      display: block;
    }
    .form-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 4px;
    }
    .form-sub {
      font-size: 10px;
      color: var(--text-light);
      margin-bottom: 10px;
    }
    .form-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 8px;
      margin-bottom: 8px;
    }
    .field {
      display: flex;
      flex-direction: column;
      gap: 3px;
    }
    .field label {
      font-size: 10px;
      color: var(--text-dark);
    }
    .field small {
      font-size: 9px;
      color: #6b7280;
    }
    .field input {
      border-radius: 9px;
      border: 1px solid rgba(209,213,219,0.9);
      padding: 7px 8px;
      background: rgba(255,255,255,0.9);
      color: var(--text-dark);
      font-size: 11px;
      outline: none;
      transition: var(--transition-fast);
    }
    .field input::placeholder {
      color: #9ca3af;
    }
    .field input:focus {
      border-color: #f97373;
      box-shadow: 0 0 0 1px rgba(248,113,113,0.35);
      background: #ffffff;
    }

    .selection-note {
      font-size: 10px;
      color: #6b7280;
      margin: 2px 0 4px;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(254, 226, 226, 0.6);
    }

    .submit-btn {
      width: 100%;
      margin-top: 4px;
      border-radius: 999px;
      padding: 8px 12px;
      border: none;
      background: var(--accent-gradient);
      color: #ffffff;
      font-weight: 600;
      font-size: 12px;
      cursor: pointer;
      box-shadow: 0 10px 24px rgba(248,113,113,0.6);
      transition: var(--transition-fast);
    }
    .submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 14px 32px rgba(248,113,113,0.8);
    }

    .form-footer {
      margin-top: 6px;
      font-size: 9px;
      color: #6b7280;
    }

    .status-msg {
      min-height: 18px;
      margin-bottom: 4px;
      font-size: 11px;
      font-weight: 500;
    }
    .status-msg.success { color: #16a34a; }
    .status-msg.error { color: #dc2626; }

    footer {
      margin-top: 10px;
      padding: 18px 24px 24px;
      border-top: 1px solid rgba(229, 231, 235, 0.9);
      font-size: 11px;
      color: var(--text-light);
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1180px;
      margin-left: auto;
      margin-right: auto;
      gap: 8px;
    }
    .footer-right {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }
    footer a {
      color: var(--accent-red);
      text-decoration: none;
    }

    #visitor-counter {
      font-size: 11px;
      color: #4b5563;
    }

    /* SUCCESS POPUP */
    .success-modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.45);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 200;
    }
    .success-modal-backdrop.visible {
      display: flex;
    }
    .success-modal {
      background: rgba(255, 255, 255, 0.96);
      border-radius: 18px;
      padding: 18px 20px 16px;
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      max-width: 320px;
      text-align: center;
      box-shadow: 0 18px 40px rgba(148,163,184,0.6);
      font-size: 12px;
    }
    .success-modal h3 {
      font-size: 16px;
      margin-bottom: 6px;
      background: linear-gradient(90deg, #22c55e, #4ade80);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .success-modal p {
      margin-bottom: 10px;
      color: #4b5563;
      font-size: 11px;
    }
    .success-modal button {
      border-radius: 999px;
      border: none;
      padding: 6px 14px;
      font-size: 11px;
      font-weight: 600;
      cursor: pointer;
      background: var(--accent-gradient);
      color: #ffffff;
      box-shadow: 0 8px 18px rgba(248,113,113,0.6);
      transition: var(--transition-fast);
    }
    .success-modal button:hover {
      transform: translateY(-1px);
      box-shadow: 0 12px 26px rgba(248,113,113,0.8);
    }

    /* RESPONSIVE */
    @media (max-width: 900px) {
      header {
        padding: 10px 16px;
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
      .header-right {
        width: 100%;
        justify-content: space-between;
      }
      nav { display: none; } /* keep hidden on mobile as you had */
      .hero,
      .flow {
        padding: 20px 16px 12px;
      }
      .usp-card {
        padding: 18px 16px 16px;
        border-radius: 22px;
      }
      .section-title {
        font-size: 22px;
      }
      .step-block {
        padding: 14px 12px 12px;
      }
      .form-card {
        padding: 12px 12px 10px;
      }
    }

    @media (max-width: 640px) {
      .trade-grid { grid-template-columns: 1fr; }
      .plans-grid { grid-template-columns: 1fr; }
      .usp-list { grid-template-columns: 1fr; }
      .brand-title {
        font-size: 16px;
        letter-spacing: 0.08em;
      }
      .brand-wrap img {
        height: 32px;
      }
      .lang-button {
        width: 100%;
        justify-content: space-between;
      }
      footer {
        flex-direction: column;
        align-items: flex-start;
        padding: 16px;
      }
    }

    @media (max-width: 400px) {
      .section-title {
        font-size: 20px;
      }
      .hero {
        padding-top: 16px;
      }
      .usp-card {
        box-shadow: 0 16px 34px rgba(248, 113, 113, 0.15);
      }
      .step-block,
      .form-card {
        box-shadow: 0 14px 30px rgba(148,163,184,0.30);
      }
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header>
    <div class="brand-wrap">
      <img src="Logo 7 With No Background.png" alt="The Institute Logo" />
      <div>
        <div class="brand-title">THE INSTITUTE</div>
        <div class="brand-sub" data-i18n-key="brand.sub">Electrical & Welding ‚Ä¢ Admissions</div>
      </div>
    </div>

    <div class="header-right">
      <nav>
        <a href="#top" data-i18n-key="nav.home">Home</a>
        <a href="#flow" data-i18n-key="nav.apply">Apply</a>
      </nav>

      <!-- LANGUAGE SWITCHER -->
      <div class="lang-switch">
        <button
          type="button"
          class="lang-button blinking"
          id="lang-button"
          aria-haspopup="true"
          aria-expanded="false"
        >
          <span data-i18n-key="lang.choose">Choose your language</span>
          <span class="lang-pill">
            <span id="current-language-label">English</span>
          </span>
          <span class="caret">‚ñº</span>
        </button>
        <div class="lang-menu" id="lang-menu">
          <button type="button" data-lang="en">
            <span>English</span>
            <span class="lang-native">English</span>
          </button>
          <button type="button" data-lang="hi">
            <span>Hindi</span>
            <span class="lang-native">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</span>
          </button>
          <button type="button" data-lang="ta">
            <span>Tamil</span>
            <span class="lang-native">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</span>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- HERO / USPs -->
  <section id="top" class="hero">
    <div class="usp-card">
      <div class="usp-title" data-i18n-key="hero.whyTitle">WHY A.T.S.I STANDS OUT ?</div>
      <div class="usp-sub" data-i18n-key="hero.subtitle">
        Built to Global Trade School Standards ‚Äî Not a Coaching Centre.
      </div>
      <div class="usp-list">
        <div class="usp-item">
          <span class="usp-dot"></span>
          <div>
            <div class="usp-label" data-i18n-key="hero.usp1.title">International Track</div>
            <div class="usp-detail" data-i18n-key="hero.usp1.text">
              Curriculum engineered for global employability.
            </div>
          </div>
        </div>
        <div class="usp-item">
          <span class="usp-dot"></span>
          <div>
            <div class="usp-label" data-i18n-key="hero.usp2.title">12:1 Faculty Ratio</div>
            <div class="usp-detail" data-i18n-key="hero.usp2.text">
              Elite trainer ratio for precision skill development.
            </div>
          </div>
        </div>
        <div class="usp-item">
          <span class="usp-dot"></span>
          <div>
            <div class="usp-label" data-i18n-key="hero.usp3.title">2:1 Workstation Ratio</div>
            <div class="usp-detail" data-i18n-key="hero.usp3.text">
              Designed for uninterrupted, hands-on skill building.
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- MAIN FLOW -->
  <section id="flow" class="flow">
    <div class="section-label" data-i18n-key="section.flowLabel">Admission Flow</div>
    <div class="section-title" data-i18n-key="section.flowTitle">
      Choose Trade ‚Üí Choose Plan ‚Üí Share Details
    </div>
    <div class="section-lede" data-i18n-key="section.flowLede">
      Start with Electrical vs Welding, then select your duration and finally share basic contact details.
    </div>

    <div class="interactive-panel">
      <!-- STEP 1 -->
      <div class="step-block">
        <div class="step-heading">
          <span data-i18n-key="step1.label">Step 1</span>
          <small data-i18n-key="step1.sub">Pick Electrical or Welding</small>
        </div>
        <div class="trade-grid">
          <div class="trade-card" data-trade="Electrical">
            <div class="trade-name">ELECTRICAL</div>
            <div class="trade-tagline">
              Domestic & industrial wiring, motors, panels & safety.
            </div>
          </div>
          <div class="trade-card" data-trade="Welding">
            <div class="trade-name">WELDING</div>
            <div class="trade-tagline">
              Structural fabrication, arc / gas welding & quality checks.
            </div>
          </div>
        </div>
      </div>

      <!-- STEP 2 -->
      <div class="step-block plans-wrapper">
        <div class="step-heading">
          <span data-i18n-key="step2.label">Step 2</span>
          <small data-i18n-key="step2.sub">Tap a 3 / 6 / 12 month plan</small>
        </div>
        <div class="plans-hint" id="plans-hint" data-i18n-key="step2.hint">
          First choose Electrical or Welding above. Then tap a plan below.
        </div>

        <div class="plans-inner">
          <!-- Electrical plans -->
          <div class="plans-grid plans-group" data-group="Electrical" style="display:none;">
            <div class="plan-card" data-duration="3 Months" data-track="Electrical">
              <div class="plan-duration">3 months ‚Ä¢ Starter</div>
              <div class="plan-price">‚Çπ40,000</div>
              <div class="plan-note">Taste of the trade + strong basics.</div>
              <ul class="plan-points">
                <li>Basic tools, cables & electrical safety habits.</li>
                <li>Single-phase wiring & simple lighting circuits.</li>
                <li>Reading basic diagrams & using tester/meter.</li>
              </ul>
            </div>

            <div class="plan-card" data-duration="6 Months" data-track="Electrical">
              <div class="plan-duration">6 months ‚Ä¢ Core</div>
              <div class="plan-price">‚Çπ83,000</div>
              <div class="plan-note">Job-focused foundation for entry-level roles.</div>
              <ul class="plan-points">
                <li>Domestic + small industrial wiring layouts.</li>
                <li>Motor starters, MCBs, RCCBs & fault finding.</li>
                <li>Regular practice with real panels & equipment.</li>
              </ul>
            </div>

            <div class="plan-card" data-duration="12 Months" data-track="Electrical">
              <div class="plan-duration">12 months ‚Ä¢ Advanced</div>
              <div class="plan-price">‚Çπ1,65,000</div>
              <div class="plan-note">Deep skills for long-term electrical careers.</div>
              <ul class="plan-points">
                <li>Three-phase panels, distribution boards & earthing.</li>
                <li>Motors, transformers, maintenance & testing.</li>
                <li>Intro to PLC / automation & basic documentation.</li>
              </ul>
            </div>
          </div>

          <!-- Welding plans -->
          <div class="plans-grid plans-group" data-group="Welding" style="display:none;">
            <div class="plan-card" data-duration="3 Months" data-track="Welding">
              <div class="plan-duration">3 months ‚Ä¢ Starter</div>
              <div class="plan-price">‚Çπ47,000</div>
              <div class="plan-note">Hands-on taste of welding basics.</div>
              <ul class="plan-points">
                <li>Workshop safety, PPE & basic hand tools.</li>
                <li>Gas / arc welding basics on plates & simple joints.</li>
                <li>Reading basic welding symbols & positions.</li>
              </ul>
            </div>

            <div class="plan-card" data-duration="6 Months" data-track="Welding">
              <div class="plan-duration">6 months ‚Ä¢ Core</div>
              <div class="plan-price">‚Çπ93,000</div>
              <div class="plan-note">Solid base for fabrication & workshop jobs.</div>
              <ul class="plan-points">
                <li>Arc, gas, and basic MIG/TIG practice.</li>
                <li>Cutting, fitting & small structure fabrication.</li>
                <li>Identifying & correcting common welding defects.</li>
              </ul>
            </div>

            <div class="plan-card" data-duration="12 Months" data-track="Welding">
              <div class="plan-duration">12 months ‚Ä¢ Advanced</div>
              <div class="plan-price">‚Çπ1,85,000</div>
              <div class="plan-note">For heavy fabrication & overseas-style work.</div>
              <ul class="plan-points">
                <li>Structural welding in multiple positions & thickness.</li>
                <li>Project work on frames, tanks & supports.</li>
                <li>Quality checks & basic NDT-style inspection concepts.</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <!-- STEP 3: FORM (Name + Mobile) -->
      <div class="form-card" id="form-card">
        <div class="step-heading">
          <span data-i18n-key="step3.label">Step 3</span>
          <small data-i18n-key="step3.sub">Share student details</small>
        </div>
        <div class="form-title" id="form-title" data-i18n-key="form.title">Student Interest Form</div>
        <div class="form-sub" data-i18n-key="form.subtitle">
          This is not final admission. We will call you with batch details, exact fees and documents required.
        </div>

        <form id="interest-form">
          <div class="form-grid">
            <div class="field">
              <label for="name" data-i18n-key="form.nameLabel">Full Name</label>
              <input id="name" name="name" type="text" placeholder="Student full name" required />
            </div>

            <div class="field">
              <label for="mobile" data-i18n-key="form.mobileLabel">Mobile Number</label>
              <input id="mobile" name="mobile" type="tel" placeholder="10-digit mobile" required />
              <small data-i18n-key="form.mobileHelp">WhatsApp or primary contact number</small>
            </div>

            <!-- Selection note + summary -->
            <div class="selection-note" data-i18n-key="form.selectionNote">
              You have selected the following course details. Please recheck before submitting.
            </div>

            <div class="field">
              <label data-i18n-key="form.chosenTradeLabel">Chosen Trade</label>
              <input id="selected-trade" type="text" readonly placeholder="Select Electrical / Welding above" />
            </div>

            <div class="field">
              <label data-i18n-key="form.chosenPlanLabel">Chosen Plan</label>
              <input id="selected-plan" type="text" readonly placeholder="Select 3 / 6 / 12 month plan above" />
            </div>
          </div>

          <button type="submit" class="submit-btn" data-i18n-key="form.submit">
            Submit Interest
          </button>

          <div class="form-footer">
            <div class="status-msg" id="status-msg"></div>
            <div data-i18n-key="form.note">
              Note: Details are stored securely in our Supabase database. You can request removal at any time.
            </div>
          </div>
        </form>
      </div>
    </div>
  </section>

  <footer>
    <div data-i18n-key="footer.copy">¬© 2025 THE INSTITUTE. Electrical & Welding Admissions.</div>
    <div class="footer-right">
      <span id="visitor-counter" data-i18n-key="footer.visitors">Visitors so far: --</span>
      <span>‚Ä¢</span>
      <a href="#top" data-i18n-key="footer.backToTop">Back to top</a>
    </div>
  </footer>

  <!-- SUCCESS POPUP -->
  <div class="success-modal-backdrop" id="success-modal">
    <div class="success-modal">
      <h3 data-i18n-key="success.title">Thanks for submitting! üéâ</h3>
      <p data-i18n-key="success.message">
        Your interest has been recorded successfully.<br />
        Our team will reach out soon with batch and admission details.
      </p>
      <button type="button" id="success-close-btn" data-i18n-key="success.button">
        Okay, got it
      </button>
    </div>
  </div>

  <!-- Supabase client -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script>
    // ========= CONFIGURE SUPABASE =========
    const SUPABASE_URL = "https://wzjvkhxjlkzkhhueijac.supabase.co";
    const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind6anZraHhqbGt6a2hodWVpamFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM0OTA0NzcsImV4cCI6MjA3OTA2NjQ3N30.AXMzMLqGJ_MCb9kgFhxjrX1IVfW-CMZ1bWucP_77daQ";

    const TABLE_NAME = "institute_leads";

    // Visitor counter config (page_visits)
    const PAGE_VISITS_TABLE = "page_visits";
    let lastVisitCount = null;

    const supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    let selectedTrade = null;
    let selectedDuration = null;

    const tradeCards = document.querySelectorAll(".trade-card");
    const planGroups = document.querySelectorAll(".plans-group");
    const planCards = document.querySelectorAll(".plan-card");

    const plansHint = document.getElementById("plans-hint");
    const formCard = document.getElementById("form-card");
    const formTitle = document.getElementById("form-title");
    const tradeInput = document.getElementById("selected-trade");
    const planInput = document.getElementById("selected-plan");
    const statusMsg = document.getElementById("status-msg");

    const successModal = document.getElementById("success-modal");
    const successCloseBtn = document.getElementById("success-close-btn");

    const visitorCounterEl = document.getElementById("visitor-counter");

    // ========= LANGUAGE SWITCHER / TRANSLATIONS =========
    const langButton = document.getElementById("lang-button");
    const langMenu = document.getElementById("lang-menu");
    const currentLangLabel = document.getElementById("current-language-label");

    let currentLanguage = "en";

    const translations = {
      en: {
        "brand.sub": "Electrical & Welding ‚Ä¢ Admissions",
        "nav.home": "Home",
        "nav.apply": "Apply",
        "lang.choose": "Choose your language",
        "hero.whyTitle": "WHY A.T.S.I STANDS OUT ?",
        "hero.subtitle": "Built to Global Trade School Standards ‚Äî Not a Coaching Centre.",
        "hero.usp1.title": "International Track",
        "hero.usp1.text": "Curriculum engineered for global employability.",
        "hero.usp2.title": "12:1 Faculty Ratio",
        "hero.usp2.text": "Elite trainer ratio for precision skill development.",
        "hero.usp3.title": "2:1 Workstation Ratio",
        "hero.usp3.text": "Designed for uninterrupted, hands-on skill building.",
        "section.flowLabel": "Admission Flow",
        "section.flowTitle": "Choose Trade ‚Üí Choose Plan ‚Üí Share Details",
        "section.flowLede": "Start with Electrical vs Welding, then select your duration and finally share basic contact details.",
        "step1.label": "Step 1",
        "step1.sub": "Pick Electrical or Welding",
        "step2.label": "Step 2",
        "step2.sub": "Tap a 3 / 6 / 12 month plan",
        "step2.hint": "First choose Electrical or Welding above. Then tap a plan below.",
        "step3.label": "Step 3",
        "step3.sub": "Share student details",
        "form.title": "Student Interest Form",
        "form.subtitle": "This is not final admission. We will call you with batch details, exact fees and documents required.",
        "form.nameLabel": "Full Name",
        "form.mobileLabel": "Mobile Number",
        "form.mobileHelp": "WhatsApp or primary contact number",
        "form.selectionNote": "You have selected the following course details. Please recheck before submitting.",
        "form.chosenTradeLabel": "Chosen Trade",
        "form.chosenPlanLabel": "Chosen Plan",
        "form.submit": "Submit Interest",
        "form.note": "Note: Details are stored securely in our Supabase database. You can request removal at any time.",
        "footer.copy": "¬© 2025 THE INSTITUTE. Electrical & Welding Admissions.",
        "footer.visitors": "Visitors so far: --",
        "footer.backToTop": "Back to top",
        "success.title": "Thanks for submitting! üéâ",
        "success.message": "Your interest has been recorded successfully.\nOur team will reach out soon with batch and admission details.",
        "success.button": "Okay, got it"
      },
      hi: {
        "brand.sub": "‡§á‡§≤‡•á‡§ï‡•ç‡§ü‡•ç‡§∞‡§ø‡§ï‡§≤ ‡§µ ‡§µ‡•á‡§≤‡•ç‡§°‡§ø‡§Ç‡§ó ‚Ä¢ ‡§è‡§°‡§Æ‡§ø‡§∂‡§®",
        "nav.home": "‡§π‡•ã‡§Æ",
        "nav.apply": "‡§™‡•ç‡§∞‡§µ‡•á‡§∂ ‡§≤‡•á‡§Ç",
        "lang.choose": "‡§Ö‡§™‡§®‡•Ä ‡§≠‡§æ‡§∑‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç",
        "hero.whyTitle": "A.T.S.I ‡§ï‡•ç‡§Ø‡•ã‡§Ç ‡§Ö‡§≤‡§ó ‡§π‡•à?",
        "hero.subtitle": "‡§ï‡•ã‡§ö‡§ø‡§Ç‡§ó ‡§∏‡•á‡§Ç‡§ü‡§∞ ‡§®‡§π‡•Ä‡§Ç, ‡§ó‡•ç‡§≤‡•ã‡§¨‡§≤ ‡§ü‡•ç‡§∞‡•á‡§° ‡§∏‡•ç‡§ï‡•Ç‡§≤ ‡§Æ‡§æ‡§®‡§ï‡•ã‡§Ç ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§¨‡§®‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ‡•§",
        "hero.usp1.title": "‡§á‡§Ç‡§ü‡§∞‡§®‡•á‡§∂‡§®‡§≤ ‡§ü‡•ç‡§∞‡•à‡§ï",
        "hero.usp1.text": "‡§ó‡•ç‡§≤‡•ã‡§¨‡§≤ ‡§∞‡•ã‡§ú‡§ó‡§æ‡§∞ ‡§ï‡•ã ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§∞‡§ñ‡§ï‡§∞ ‡§¨‡§®‡§æ ‡§™‡§æ‡§†‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ‡•§",
        "hero.usp2.title": "12:1 ‡§´‡•à‡§ï‡§≤‡•ç‡§ü‡•Ä ‡§∞‡•á‡§∂‡§ø‡§Ø‡•ã",
        "hero.usp2.text": "‡§™‡•ç‡§∞‡§ø‡§∏‡§ø‡§∂‡§® ‡§∏‡•ç‡§ï‡§ø‡§≤ ‡§°‡•á‡§µ‡•á‡§≤‡§™‡§Æ‡•á‡§Ç‡§ü ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§≤‡§æ‡§á‡§ü ‡§ü‡•ç‡§∞‡•á‡§®‡§∞ ‡§∞‡•á‡§∂‡§ø‡§Ø‡•ã‡•§",
        "hero.usp3.title": "2:1 ‡§µ‡§∞‡•ç‡§ï‡§∏‡•ç‡§ü‡•á‡§∂‡§® ‡§∞‡•á‡§∂‡§ø‡§Ø‡•ã",
        "hero.usp3.text": "‡§¨‡§ø‡§®‡§æ ‡§∞‡•Å‡§ï‡§æ‡§µ‡§ü ‡§π‡•à‡§Ç‡§°‡•ç‡§∏-‡§ë‡§® ‡§ü‡•ç‡§∞‡•á‡§®‡§ø‡§Ç‡§ó ‡§ï‡•á ‡§≤‡§ø‡§è ‡§°‡§ø‡§ú‡§º‡§æ‡§á‡§® ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ‡•§",
        "section.flowLabel": "‡§è‡§°‡§Æ‡§ø‡§∂‡§® ‡§´‡•ç‡§≤‡•ã",
        "section.flowTitle": "‡§ü‡•ç‡§∞‡•á‡§° ‡§ö‡•Å‡§®‡•á‡§Ç ‚Üí ‡§™‡•ç‡§≤‡§æ‡§® ‡§ö‡•Å‡§®‡•á‡§Ç ‚Üí ‡§°‡§ø‡§ü‡•á‡§≤ ‡§≠‡§∞‡•á‡§Ç",
        "section.flowLede": "‡§™‡§π‡§≤‡•á ‡§á‡§≤‡•á‡§ï‡•ç‡§ü‡•ç‡§∞‡§ø‡§ï‡§≤ ‡§Ø‡§æ ‡§µ‡•á‡§≤‡•ç‡§°‡§ø‡§Ç‡§ó ‡§ö‡•Å‡§®‡•á‡§Ç, ‡§´‡§ø‡§∞ ‡§Ö‡§µ‡§ß‡§ø ‡§ö‡•Å‡§®‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§Ç‡§§ ‡§Æ‡•á‡§Ç ‡§¨‡•á‡§∏‡§ø‡§ï ‡§ï‡•â‡§®‡•ç‡§ü‡•à‡§ï‡•ç‡§ü ‡§°‡§ø‡§ü‡•á‡§≤ ‡§≠‡§∞‡•á‡§Ç‡•§",
        "step1.label": "‡§∏‡•ç‡§ü‡•á‡§™ 1",
        "step1.sub": "‡§á‡§≤‡•á‡§ï‡•ç‡§ü‡•ç‡§∞‡§ø‡§ï‡§≤ ‡§Ø‡§æ ‡§µ‡•á‡§≤‡•ç‡§°‡§ø‡§Ç‡§ó ‡§ö‡•Å‡§®‡•á‡§Ç",
        "step2.label": "‡§∏‡•ç‡§ü‡•á‡§™ 2",
        "step2.sub": "3 / 6 / 12 ‡§Æ‡§π‡•Ä‡§®‡•á ‡§ï‡§æ ‡§™‡•ç‡§≤‡§æ‡§® ‡§ö‡•Å‡§®‡•á‡§Ç",
        "step2.hint": "‡§∏‡§¨‡§∏‡•á ‡§™‡§π‡§≤‡•á ‡§ä‡§™‡§∞ ‡§∏‡•á ‡§á‡§≤‡•á‡§ï‡•ç‡§ü‡•ç‡§∞‡§ø‡§ï‡§≤ ‡§Ø‡§æ ‡§µ‡•á‡§≤‡•ç‡§°‡§ø‡§Ç‡§ó ‡§ö‡•Å‡§®‡•á‡§Ç, ‡§´‡§ø‡§∞ ‡§®‡•Ä‡§ö‡•á ‡§∏‡•á ‡§™‡•ç‡§≤‡§æ‡§® ‡§∏‡§ø‡§≤‡•á‡§ï‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç‡•§",
        "step3.label": "‡§∏‡•ç‡§ü‡•á‡§™ 3",
        "step3.sub": "‡§∏‡•ç‡§ü‡•Ç‡§°‡•á‡§Ç‡§ü ‡§ï‡•Ä ‡§°‡§ø‡§ü‡•á‡§≤ ‡§≠‡§∞‡•á‡§Ç",
        "form.title": "‡§∏‡•ç‡§ü‡•Ç‡§°‡•á‡§Ç‡§ü ‡§á‡§Ç‡§ü‡§∞‡•á‡§∏‡•ç‡§ü ‡§´‡•â‡§∞‡•ç‡§Æ",
        "form.subtitle": "‡§Ø‡§π ‡§´‡§æ‡§á‡§®‡§≤ ‡§è‡§°‡§Æ‡§ø‡§∂‡§® ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§ ‡§π‡§Æ ‡§Ü‡§™‡§ï‡•ã ‡§¨‡•à‡§ö ‡§°‡§ø‡§ü‡•á‡§≤, ‡§∏‡§π‡•Ä ‡§´‡•Ä‡§∏ ‡§î‡§∞ ‡§°‡•â‡§ï‡•ç‡§Ø‡•Ç‡§Æ‡•á‡§Ç‡§ü ‡§≤‡§ø‡§∏‡•ç‡§ü ‡§ï‡•á ‡§∏‡§æ‡§• ‡§ï‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á‡•§",
        "form.nameLabel": "‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ",
        "form.mobileLabel": "‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞",
        "form.mobileHelp": "‡§µ‡•ç‡§π‡§æ‡§ü‡•ç‡§∏‡§è‡§™ ‡§Ø‡§æ ‡§™‡•ç‡§∞‡§æ‡§á‡§Æ‡§∞‡•Ä ‡§ï‡•â‡§®‡•ç‡§ü‡•à‡§ï‡•ç‡§ü ‡§®‡§Ç‡§¨‡§∞",
        "form.selectionNote": "‡§Ü‡§™‡§®‡•á ‡§®‡•Ä‡§ö‡•á ‡§¶‡§ø‡§Ø‡§æ ‡§π‡•Å‡§Ü ‡§ï‡•ã‡§∞‡•ç‡§∏ ‡§ö‡•Å‡§®‡§æ ‡§π‡•à‡•§ ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡§®‡•á ‡§∏‡•á ‡§™‡§π‡§≤‡•á ‡§è‡§ï ‡§¨‡§æ‡§∞ ‡§ú‡§º‡§∞‡•Ç‡§∞ ‡§ö‡•á‡§ï ‡§ï‡§∞ ‡§≤‡•á‡§Ç‡•§",
        "form.chosenTradeLabel": "‡§ö‡•Å‡§®‡§æ ‡§π‡•Å‡§Ü ‡§ü‡•ç‡§∞‡•á‡§°",
        "form.chosenPlanLabel": "‡§ö‡•Å‡§®‡§æ ‡§π‡•Å‡§Ü ‡§™‡•ç‡§≤‡§æ‡§®",
        "form.submit": "‡§á‡§Ç‡§ü‡§∞‡•á‡§∏‡•ç‡§ü ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç",
        "form.note": "‡§®‡•ã‡§ü: ‡§Ü‡§™‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§π‡§Æ‡§æ‡§∞‡•á ‡§∏‡•Å‡§™‡§æ‡§¨‡•á‡§∏ ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏ ‡§Æ‡•á‡§Ç ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∞‡§ñ‡•Ä ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à‡•§ ‡§Ü‡§™ ‡§ï‡§≠‡•Ä ‡§≠‡•Ä ‡§π‡§ü‡§æ‡§®‡•á ‡§ï‡•Ä ‡§∞‡§ø‡§ï‡•ç‡§µ‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§",
        "footer.copy": "¬© 2025 THE INSTITUTE. ‡§á‡§≤‡•á‡§ï‡•ç‡§ü‡•ç‡§∞‡§ø‡§ï‡§≤ ‡§µ ‡§µ‡•á‡§≤‡•ç‡§°‡§ø‡§Ç‡§ó ‡§è‡§°‡§Æ‡§ø‡§∂‡§®‡•§",
        "footer.visitors": "‡§Ö‡§¨ ‡§§‡§ï ‡§µ‡§ø‡§ú‡§º‡§ø‡§ü‡§∞‡•ç‡§∏: --",
        "footer.backToTop": "‡§ä‡§™‡§∞ ‡§ú‡§æ‡§è‡§Å",
        "success.title": "‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶! üéâ",
        "success.message": "‡§Ü‡§™‡§ï‡•Ä ‡§á‡§Ç‡§ü‡§∞‡•á‡§∏‡•ç‡§ü ‡§è‡§Ç‡§ü‡•ç‡§∞‡•Ä ‡§∏‡•á‡§µ ‡§π‡•ã ‡§ó‡§à ‡§π‡•à‡•§\n‡§π‡§Æ ‡§ú‡§≤‡•ç‡§¶ ‡§π‡•Ä ‡§Ü‡§™‡§ï‡•ã ‡§¨‡•à‡§ö ‡§î‡§∞ ‡§è‡§°‡§Æ‡§ø‡§∂‡§® ‡§°‡§ø‡§ü‡•á‡§≤ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á‡•§",
        "success.button": "‡§†‡•Ä‡§ï ‡§π‡•à"
      },
      ta: {
        "brand.sub": "‡Æé‡Æ≤‡ØÜ‡Æï‡Øç‡Æü‡Øç‡Æ∞‡Æø‡Æï‡Øç‡Æï‡Æ≤‡Øç & ‡Æµ‡ØÜ‡Æ≤‡Øç‡Æü‡Æø‡Æô‡Øç ‚Ä¢ ‡Æö‡Øá‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Øà",
        "nav.home": "‡ÆÆ‡ØÅ‡Æï‡Æ™‡Øç‡Æ™‡ØÅ",
        "nav.apply": "‡Æö‡Øá‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Øà ‡Æµ‡Æø‡Æ£‡Øç‡Æ£‡Æ™‡Øç‡Æ™‡ÆÆ‡Øç",
        "lang.choose": "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡Øä‡Æ¥‡Æø‡ÆØ‡Øà‡Æ§‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç",
        "hero.whyTitle": "A.T.S.I ‡Æè‡Æ©‡Øç ‡Æµ‡Æø‡Æ§‡Øç‡Æ§‡Æø‡ÆØ‡Ææ‡Æö‡ÆÆ‡Øç?",
        "hero.subtitle": "‡Æï‡Øã‡Æö‡Øç‡Æö‡Æø‡Æô‡Øç ‡Æö‡ØÜ‡Æ©‡Øç‡Æü‡Æ∞‡Øç ‡ÆÖ‡Æ≤‡Øç‡Æ≤ ‚Äî ‡Æâ‡Æ≤‡Æï‡Æ§‡Øç ‡Æ§‡Æ∞‡ÆÆ‡Ææ‡Æ© ‡Æü‡Æø‡Æ∞‡Øá‡Æü‡ØÅ ‡Æ™‡Æ≥‡Øç‡Æ≥‡Æø ‡Æ§‡Æ∞‡Æ§‡Øç‡Æ§‡Æø‡Æ±‡Øç‡Æï‡ØÅ ‡Æè‡Æ±‡Øç‡Æ™ ‡Æµ‡Æü‡Æø‡Æµ‡ÆÆ‡Øà‡Æ™‡Øç‡Æ™‡ØÅ.",
        "hero.usp1.title": "‡Æá‡Æ©‡Øç‡Æü‡Æ∞‡Øç‡Æ®‡Øá‡Æ∑‡Æ©‡Æ≤‡Øç ‡Æü‡Æø‡Æ∞‡Ææ‡Æï‡Øç",
        "hero.usp1.text": "‡Æâ‡Æ≤‡Æï‡Æ≥‡Ææ‡Æµ‡Æø‡ÆØ ‡Æµ‡Øá‡Æ≤‡Øà ‡Æµ‡Ææ‡ÆØ‡Øç‡Æ™‡Øç‡Æ™‡Øà ‡Æ®‡Øã‡Æï‡Øç‡Æï‡Æø ‡Æµ‡Æü‡Æø‡Æµ‡ÆÆ‡Øà‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü ‡Æ™‡Ææ‡Æü‡Æ§‡Øç‡Æ§‡Æø‡Æü‡Øç‡Æü‡ÆÆ‡Øç.",
        "hero.usp2.title": "12:1 ‡Æ™‡Øá‡Æ∞‡Ææ‡Æö‡Æø‡Æ∞‡Æø‡ÆØ‡Æ∞‡Øç ‡Æµ‡Æø‡Æï‡Æø‡Æ§‡ÆÆ‡Øç",
        "hero.usp2.text": "‡Æ§‡ØÅ‡Æ≤‡Øç‡Æ≤‡Æø‡ÆØ‡ÆÆ‡Ææ‡Æ© ‡Æ§‡Æø‡Æ±‡Æ©‡Øç ‡Æµ‡Æ≥‡Æ∞‡Øç‡Æö‡Øç‡Æö‡Æø‡Æï‡Øç‡Æï‡Ææ‡Æ© ‡Æö‡Æø‡Æ±‡Æ™‡Øç‡Æ™‡ØÅ ‡Æ™‡ÆØ‡Æø‡Æ±‡Øç‡Æ±‡ØÅ‡Æ®‡Æ∞‡Øç ‡Æµ‡Æø‡Æï‡Æø‡Æ§‡ÆÆ‡Øç.",
        "hero.usp3.title": "2:1 ‡Æµ‡Øä‡Æ∞‡Øç‡Æï‡Øç ‡Æ∏‡Øç‡Æü‡Øá‡Æ∑‡Æ©‡Øç ‡Æµ‡Æø‡Æï‡Æø‡Æ§‡ÆÆ‡Øç",
        "hero.usp3.text": "‡Æá‡Æü‡Øà‡ÆØ‡ØÇ‡Æ±‡ØÅ ‡Æá‡Æ≤‡Øç‡Æ≤‡Ææ‡Æ§ ‡Æπ‡Ææ‡Æ£‡Øç‡Æü‡Øç‡Æ∏‡Øç-‡ÆÜ‡Æ©‡Øç ‡Æ™‡ÆØ‡Æø‡Æ±‡Øç‡Æö‡Æø‡Æï‡Øç‡Æï‡Ææ‡Æï ‡Æµ‡Æü‡Æø‡Æµ‡ÆÆ‡Øà‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ.",
        "section.flowLabel": "‡Æö‡Øá‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Øà ‡Æ®‡Æü‡Øà‡ÆÆ‡ØÅ‡Æ±‡Øà",
        "section.flowTitle": "‡Æü‡Æø‡Æ∞‡Øá‡Æü‡ØÅ ‡Æ§‡Øá‡Æ∞‡Øç‡Æµ‡ØÅ ‚Üí ‡Æ§‡Æø‡Æü‡Øç‡Æü‡ÆÆ‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æµ‡ØÅ ‚Üí ‡Æµ‡Æø‡Æµ‡Æ∞‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ™‡Æï‡Æø‡Æ∞‡Øç‡Æµ‡ØÅ",
        "section.flowLede": "‡ÆÆ‡ØÅ‡Æ§‡Æ≤‡Æø‡Æ≤‡Øç ‡Æé‡Æ≤‡ØÜ‡Æï‡Øç‡Æü‡Øç‡Æ∞‡Æø‡Æï‡Øç‡Æï‡Æ≤‡Øç ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æµ‡ØÜ‡Æ≤‡Øç‡Æü‡Æø‡Æô‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç, ‡Æ™‡Æø‡Æ±‡Æï‡ØÅ ‡Æï‡Ææ‡Æ≤‡ÆÖ‡Æ≥‡Æµ‡ØÅ ‡Æ§‡Øá‡Æ∞‡Øç‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡ØÅ ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ ‡Æµ‡Æø‡Æµ‡Æ∞‡Æô‡Øç‡Æï‡Æ≥‡Øà ‡Æ®‡Æø‡Æ∞‡Æ™‡Øç‡Æ™‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç.",
        "step1.label": "‡Æ™‡Æü‡Æø 1",
        "step1.sub": "‡Æé‡Æ≤‡ØÜ‡Æï‡Øç‡Æü‡Øç‡Æ∞‡Æø‡Æï‡Øç‡Æï‡Æ≤‡Øç / ‡Æµ‡ØÜ‡Æ≤‡Øç‡Æü‡Æø‡Æô‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç",
        "step2.label": "‡Æ™‡Æü‡Æø 2",
        "step2.sub": "3 / 6 / 12 ‡ÆÆ‡Ææ‡Æ§ ‡Æ§‡Æø‡Æü‡Øç‡Æü‡Æ§‡Øç‡Æ§‡Øà‡Æ§‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç",
        "step2.hint": "‡ÆÆ‡Øá‡Æ≤‡Øá ‡Æé‡Æ≤‡ØÜ‡Æï‡Øç‡Æü‡Øç‡Æ∞‡Æø‡Æï‡Øç‡Æï‡Æ≤‡Øç ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æµ‡ØÜ‡Æ≤‡Øç‡Æü‡Æø‡Æô‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§ ‡Æ™‡Æø‡Æ±‡Æï‡ØÅ, ‡Æï‡ØÄ‡Æ¥‡Øá ‡Æ§‡Æø‡Æü‡Øç‡Æü‡Æ§‡Øç‡Æ§‡Øà‡Æ§‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç.",
        "step3.label": "‡Æ™‡Æü‡Æø 3",
        "step3.sub": "‡ÆÆ‡Ææ‡Æ£‡Æµ‡Æ∞‡Øç ‡Æµ‡Æø‡Æ™‡Æ∞‡Æô‡Øç‡Æï‡Æ≥‡Øà ‡Æ®‡Æø‡Æ∞‡Æ™‡Øç‡Æ™‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç",
        "form.title": "‡ÆÆ‡Ææ‡Æ£‡Æµ‡Æ∞‡Øç ‡ÆÜ‡Æ∞‡Øç‡Æµ‡Æ™‡Øç ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æ™‡Æü‡Æø‡Æµ‡ÆÆ‡Øç",
        "form.subtitle": "‡Æá‡Æ§‡ØÅ ‡Æá‡Æ±‡ØÅ‡Æ§‡Æø ‡Æö‡Øá‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Øà ‡ÆÖ‡Æ≤‡Øç‡Æ≤. ‡Æ™‡Øá‡Æü‡Øç‡Æö‡Øç ‡Æµ‡Æø‡Æµ‡Æ∞‡Æô‡Øç‡Æï‡Æ≥‡Øç, ‡Æ§‡ØÅ‡Æ≤‡Øç‡Æ≤‡Æø‡ÆØ ‡Æï‡Æü‡Øç‡Æü‡Æ£‡ÆÆ‡Øç, ‡Æ§‡Øá‡Æµ‡Øà‡ÆØ‡Ææ‡Æ© ‡ÆÜ‡Æµ‡Æ£‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÜ‡Æï‡Æø‡ÆØ‡Æµ‡Æ±‡Øç‡Æ±‡ØÅ‡Æü‡Æ©‡Øç ‡Æ®‡Ææ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øà ‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ ‡Æï‡Øä‡Æ≥‡Øç‡Æµ‡Øã‡ÆÆ‡Øç.",
        "form.nameLabel": "‡ÆÆ‡ØÅ‡Æ¥‡ØÅ ‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç",
        "form.mobileLabel": "‡ÆÆ‡Øä‡Æ™‡Øà‡Æ≤‡Øç ‡Æé‡Æ£‡Øç",
        "form.mobileHelp": "‡Æµ‡Ææ‡Æü‡Øç‡Æ∏‡Øç‡ÆÖ‡Æ™‡Øç ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡ÆÆ‡ØÅ‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ ‡Æé‡Æ£‡Øç",
        "form.selectionNote": "‡Æ®‡ØÄ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡ØÅ‡Æ≥‡Øç‡Æ≥ ‡Æï‡Øã‡Æ∞‡Øç‡Æ∏‡Øç ‡Æµ‡Æø‡Æµ‡Æ∞‡ÆÆ‡Øç ‡Æï‡ØÄ‡Æ¥‡Øá ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æ§‡ØÅ. ‡Æö‡ÆÆ‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡Æø‡Æ™‡Øç‡Æ™‡Æ§‡Æ±‡Øç‡Æï‡ØÅ ‡ÆÆ‡ØÅ‡Æ©‡Øç ‡Æí‡Æ∞‡ØÅ‡ÆÆ‡ØÅ‡Æ±‡Øà ‡Æö‡Æ∞‡Æø‡Æ™‡Ææ‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.",
        "form.chosenTradeLabel": "‡Æ§‡Øá‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ‡Æ§‡Øç‡Æ§ ‡Æü‡Æø‡Æ∞‡Øá‡Æü‡ØÅ",
        "form.chosenPlanLabel": "‡Æ§‡Øá‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ‡Æ§‡Øç‡Æ§ ‡Æ§‡Æø‡Æü‡Øç‡Æü‡ÆÆ‡Øç",
        "form.submit": "‡ÆÜ‡Æ∞‡Øç‡Æµ‡Æ§‡Øç‡Æ§‡Øà ‡Æö‡ÆÆ‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç",
        "form.note": "‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ: ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ§‡Æï‡Æµ‡Æ≤‡Øç‡Æï‡Æ≥‡Øç ‡Æé‡Æô‡Øç‡Æï‡Æ≥‡Øç Supabase ‡Æ§‡Æ∞‡Æµ‡ØÅ‡Æ§‡Øç‡Æ§‡Æ≥‡Æ§‡Øç‡Æ§‡Æø‡Æ≤‡Øç ‡Æ™‡Ææ‡Æ§‡ØÅ‡Æï‡Ææ‡Æ™‡Øç‡Æ™‡Ææ‡Æï ‡Æµ‡Øà‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡ÆÆ‡Øç. ‡Æ®‡ØÄ‡Æï‡Øç‡Æï ‡Æµ‡Øá‡Æ£‡Øç‡Æü‡ØÅ‡ÆÆ‡ØÜ‡Æ©‡Æø‡Æ≤‡Øç ‡Æé‡Æ™‡Øç‡Æ™‡Øã‡Æ§‡ØÅ‡ÆÆ‡Øç ‡Æï‡Øã‡Æ∞‡Æ≤‡Ææ‡ÆÆ‡Øç.",
        "footer.copy": "¬© 2025 THE INSTITUTE. ‡Æé‡Æ≤‡ØÜ‡Æï‡Øç‡Æü‡Øç‡Æ∞‡Æø‡Æï‡Øç‡Æï‡Æ≤‡Øç & ‡Æµ‡ØÜ‡Æ≤‡Øç‡Æü‡Æø‡Æô‡Øç ‡Æö‡Øá‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Øà.",
        "footer.visitors": "‡Æá‡Æ§‡ØÅ‡Æµ‡Æ∞‡Øà ‡Æµ‡Æ®‡Øç‡Æ§ ‡Æ™‡Ææ‡Æ∞‡Øç‡Æµ‡Øà‡ÆØ‡Ææ‡Æ≥‡Æ∞‡Øç‡Æï‡Æ≥‡Øç: --",
        "footer.backToTop": "‡ÆÆ‡Øá‡Æ≤‡Øç ‡Æö‡ØÜ‡Æ≤‡Øç‡Æ≤",
        "success.title": "‡Æö‡ÆÆ‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡Æø‡Æ§‡Øç‡Æ§‡Æ§‡Æ±‡Øç‡Æï‡ØÅ ‡Æ®‡Æ©‡Øç‡Æ±‡Æø! üéâ",
        "success.message": "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÜ‡Æ∞‡Øç‡Æµ‡Æ™‡Øç ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æµ‡ØÜ‡Æ±‡Øç‡Æ±‡Æø‡Æï‡Æ∞‡ÆÆ‡Ææ‡Æï ‡Æö‡Øá‡ÆÆ‡Æø‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ.\n‡Æ™‡Øá‡Æü‡Øç‡Æö‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æö‡Øá‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Øà ‡Æµ‡Æø‡Æµ‡Æ∞‡Æô‡Øç‡Æï‡Æ≥‡ØÅ‡Æü‡Æ©‡Øç ‡Æ®‡Ææ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æµ‡Æø‡Æ∞‡Øà‡Æµ‡Æø‡Æ≤‡Øç ‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ ‡Æï‡Øä‡Æ≥‡Øç‡Æï‡Æø‡Æ±‡Øã‡ÆÆ‡Øç.",
        "success.button": "‡Æö‡Æ∞‡Æø"
      }
    };

    function updateVisitorText(count) {
      lastVisitCount = count;
      if (!visitorCounterEl) return;

      if (currentLanguage === "hi") {
        visitorCounterEl.textContent = "‡§Ö‡§¨ ‡§§‡§ï ‡§µ‡§ø‡§ú‡§º‡§ø‡§ü‡§∞‡•ç‡§∏: " + count;
      } else if (currentLanguage === "ta") {
        visitorCounterEl.textContent = "‡Æá‡Æ§‡ØÅ‡Æµ‡Æ∞‡Øà ‡Æµ‡Æ®‡Øç‡Æ§ ‡Æ™‡Ææ‡Æ∞‡Øç‡Æµ‡Øà‡ÆØ‡Ææ‡Æ≥‡Æ∞‡Øç‡Æï‡Æ≥‡Øç: " + count;
      } else {
        visitorCounterEl.textContent = "Visitors so far: " + count;
      }
    }

    function applyLanguage(lang) {
      currentLanguage = lang;
      document.documentElement.lang = lang === "ta" ? "ta" : (lang === "hi" ? "hi" : "en");

      // Update current language label
      if (lang === "en") currentLangLabel.textContent = "English";
      if (lang === "hi") currentLangLabel.textContent = "‡§π‡§ø‡§®‡•ç‡§¶‡•Ä";
      if (lang === "ta") currentLangLabel.textContent = "‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç";

      const dict = translations[lang] || translations.en;
      document.querySelectorAll("[data-i18n-key]").forEach((el) => {
        const key = el.getAttribute("data-i18n-key");
        if (dict[key]) {
          el.textContent = "";
          const parts = String(dict[key]).split("\\n");
          parts.forEach((part, idx) => {
            if (idx > 0) el.appendChild(document.createElement("br"));
            el.appendChild(document.createTextNode(part));
          });
        }
      });

      // keep visitor count text in sync with language
      if (lastVisitCount !== null) {
        updateVisitorText(lastVisitCount);
      }

      // stop blinking once user consciously chooses language
      langButton.classList.remove("blinking");
    }

    // Language menu behavior
    langButton.addEventListener("click", () => {
      const isOpen = langMenu.classList.contains("visible");
      langMenu.classList.toggle("visible");
      langButton.setAttribute("aria-expanded", String(!isOpen));
    });

    document.addEventListener("click", (e) => {
      if (!langButton.contains(e.target) && !langMenu.contains(e.target)) {
        langMenu.classList.remove("visible");
        langButton.setAttribute("aria-expanded", "false");
      }
    });

    langMenu.querySelectorAll("button[data-lang]").forEach((btn) => {
      btn.addEventListener("click", () => {
        const lang = btn.getAttribute("data-lang");
        applyLanguage(lang);
        langMenu.classList.remove("visible");
        langButton.setAttribute("aria-expanded", "false");
      });
    });

    // Apply default language (English) on load
    applyLanguage("en");

    // ========= SUCCESS MODAL =========
    function openSuccessModal() {
      successModal.classList.add("visible");
      setTimeout(() => {
        successModal.classList.remove("visible");
      }, 4000);
    }

    successCloseBtn.addEventListener("click", () => {
      successModal.classList.remove("visible");
    });

    // ========= STEP 1: Trade selection =========
    tradeCards.forEach(card => {
      card.addEventListener("click", () => {
        selectedTrade = card.dataset.trade;

        tradeCards.forEach(c => c.classList.remove("active"));
        card.classList.add("active");

        planGroups.forEach(group => {
          if (group.dataset.group === selectedTrade) {
            group.style.display = "grid";
          } else {
            group.style.display = "none";
          }
        });

        selectedDuration = null;
        planCards.forEach(p => p.classList.remove("active"));
        planInput.value = "";
        statusMsg.textContent = "";
        statusMsg.className = "status-msg";

        tradeInput.value = selectedTrade;

        const dict = translations[currentLanguage] || translations.en;
        plansHint.textContent = dict["step2.hint"] || "First choose Electrical or Welding above. Then tap a plan below.";
      });
    });

    // ========= STEP 2: Plan selection =========
    planCards.forEach(card => {
      card.addEventListener("click", () => {
        const cardTrade = card.dataset.track;
        if (!selectedTrade || cardTrade !== selectedTrade) {
          const dict = translations[currentLanguage] || translations.en;
          if (currentLanguage === "hi") {
            plansHint.textContent = cardTrade + " ‡§ä‡§™‡§∞ ‡§∏‡•á ‡§™‡§π‡§≤‡•á ‡§ö‡•Å‡§®‡•á‡§Ç‡•§";
          } else if (currentLanguage === "ta") {
            plansHint.textContent = "‡ÆÆ‡ØÅ‡Æ§‡Æ≤‡Æø‡Æ≤‡Øç ‡ÆÆ‡Øá‡Æ≤‡Øá " + cardTrade + " ‡Æü‡Æø‡Æ∞‡Øá‡Æü‡Øà‡Æ§‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç.";
          } else {
            plansHint.textContent = "Please select " + cardTrade + " above first.";
          }
          return;
        }

        selectedDuration = card.dataset.duration;

        planCards.forEach(p => p.classList.remove("active"));
        card.classList.add("active");

        planInput.value = selectedDuration;

        const baseTitleDict = translations[currentLanguage] || translations.en;
        const baseTitle = baseTitleDict["form.title"] || "Student Interest Form";
        formTitle.textContent = selectedTrade + " ‚Ä¢ " + selectedDuration + " ‚Äì " + baseTitle;

        formCard.classList.add("visible");
        formCard.scrollIntoView({ behavior: "smooth", block: "start" });
        setTimeout(() => window.scrollBy(0, -10), 400);
      });
    });

    // ========= STEP 3: Submit to Supabase (Name + Mobile + selections) =========
    const form = document.getElementById("interest-form");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      statusMsg.textContent = "";
      statusMsg.className = "status-msg";

      if (!selectedTrade || !selectedDuration) {
        statusMsg.textContent =
          currentLanguage === "hi"
            ? "‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§ü‡•ç‡§∞‡•á‡§° ‡§î‡§∞ ‡§™‡•ç‡§≤‡§æ‡§® ‡§ö‡•Å‡§®‡•á‡§Ç‡•§"
            : currentLanguage === "ta"
              ? "‡ÆÆ‡ØÅ‡Æ§‡Æ≤‡Æø‡Æ≤‡Øç ‡Æü‡Æø‡Æ∞‡Øá‡Æü‡ØÅ ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æ§‡Æø‡Æü‡Øç‡Æü‡Æ§‡Øç‡Æ§‡Øà‡Æ§‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç."
              : "Please select a trade and a plan first.";
        statusMsg.classList.add("error");
        return;
      }

      const name = document.getElementById("name").value.trim();
      const mobile = document.getElementById("mobile").value.trim();

      if (!name || !mobile) {
        statusMsg.textContent =
          currentLanguage === "hi"
            ? "‡§ï‡•É‡§™‡§Ø‡§æ ‡§®‡§æ‡§Æ ‡§î‡§∞ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§≠‡§∞‡•á‡§Ç‡•§"
            : currentLanguage === "ta"
              ? "‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡ÆÆ‡Øä‡Æ™‡Øà‡Æ≤‡Øç ‡Æé‡Æ£‡Øç‡Æ£‡Øà ‡Æ®‡Æø‡Æ∞‡Æ™‡Øç‡Æ™‡Æµ‡ØÅ‡ÆÆ‡Øç."
              : "Please fill both name and mobile number.";
        statusMsg.classList.add("error");
        return;
      }

      if (!/^\d{10}$/.test(mobile)) {
        statusMsg.textContent =
          currentLanguage === "hi"
            ? "‡§ï‡•É‡§™‡§Ø‡§æ 10 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§∏‡§π‡•Ä ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§"
            : currentLanguage === "ta"
              ? "‡Æö‡Æ∞‡Æø‡ÆØ‡Ææ‡Æ© 10 ‡Æá‡Æ≤‡Æï‡Øç‡Æï ‡ÆÆ‡Øä‡Æ™‡Øà‡Æ≤‡Øç ‡Æé‡Æ£‡Øç‡Æ£‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç."
              : "Please enter a valid 10-digit mobile number.";
        statusMsg.classList.add("error");
        return;
      }

      statusMsg.textContent =
        currentLanguage === "hi"
          ? "‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à..."
          : currentLanguage === "ta"
            ? "‡Æö‡ÆÆ‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡Æø‡Æ§‡Øç‡Æ§‡ØÅ ‡Æï‡Øä‡Æ£‡Øç‡Æü‡Æø‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡Æ§‡ØÅ..."
            : "Submitting...";
      statusMsg.className = "status-msg";

      try {
        const { data, error } = await supabaseClient
          .from(TABLE_NAME)
          .insert([
            {
              name: name,
              mobile: mobile,
              interested_course: selectedTrade,
              duration: selectedDuration,
              created_at: new Date().toISOString()
            }
          ]);

        if (error) {
          console.error(error);
          statusMsg.textContent =
            currentLanguage === "hi"
              ? "‡§°‡•á‡§ü‡§æ ‡§∏‡•á‡§µ ‡§ï‡§∞‡§§‡•á ‡§∏‡§Æ‡§Ø ‡§ï‡•Å‡§õ ‡§ó‡§≤‡§§‡•Ä ‡§π‡•Å‡§à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¶‡•ã‡§¨‡§æ‡§∞‡§æ ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç‡•§"
              : currentLanguage === "ta"
                ? "‡Æµ‡Æø‡Æµ‡Æ∞‡Æô‡Øç‡Æï‡Æ≥‡Øà ‡Æö‡Øá‡ÆÆ‡Æø‡Æï‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç ‡Æ™‡Øã‡Æ§‡ØÅ ‡Æ™‡Æø‡Æ¥‡Øà ‡Æè‡Æ±‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ. ‡ÆÆ‡ØÄ‡Æ£‡Øç‡Æü‡ØÅ‡ÆÆ‡Øç ‡ÆÆ‡ØÅ‡ÆØ‡Æ±‡Øç‡Æö‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç."
                : "Something went wrong while saving your details. Please try again.";
          statusMsg.classList.add("error");
        } else {
          statusMsg.textContent =
            currentLanguage === "hi"
              ? "‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶! ‡§Ü‡§™‡§ï‡§æ ‡§á‡§Ç‡§ü‡§∞‡•á‡§∏‡•ç‡§ü ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§π‡•ã ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§ ‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§ü‡•Ä‡§Æ ‡§Ü‡§™‡§∏‡•á ‡§ú‡§≤‡•ç‡§¶ ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§ó‡•Ä‡•§"
              : currentLanguage === "ta"
                ? "‡Æ®‡Æ©‡Øç‡Æ±‡Æø! ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÜ‡Æ∞‡Øç‡Æµ‡Æ™‡Øç ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æµ‡ØÜ‡Æ±‡Øç‡Æ±‡Æø‡Æï‡Æ∞‡ÆÆ‡Ææ‡Æï ‡Æö‡ÆÆ‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡Æø‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ. ‡Æé‡Æô‡Øç‡Æï‡Æ≥‡Æø‡Æ©‡Øç ‡Æï‡ØÅ‡Æ¥‡ØÅ ‡Æµ‡Æø‡Æ∞‡Øà‡Æµ‡Æø‡Æ≤‡Øç ‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ ‡Æï‡Øä‡Æ≥‡Øç‡Æï‡Æø‡Æ±‡Æ§‡ØÅ."
                : "Thank you! Your interest is submitted. Our team will contact you soon.";
          statusMsg.classList.add("success");
          form.reset();
          openSuccessModal();

          // reset selections so next entry is clean
          selectedTrade = null;
          selectedDuration = null;
          tradeInput.value = "";
          planInput.value = "";
          tradeCards.forEach(c => c.classList.remove("active"));
          planCards.forEach(c => c.classList.remove("active"));
          planGroups.forEach(group => group.style.display = "none");

          const dict = translations[currentLanguage] || translations.en;
          plansHint.textContent = dict["step2.hint"] || "First choose Electrical or Welding above. Then tap a plan below.";
        }
      } catch (err) {
        console.error(err);
        statusMsg.textContent =
          currentLanguage === "hi"
            ? "‡§Ö‡§®‡§™‡•á‡§ï‡•ç‡§∑‡§ø‡§§ ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø ‡§π‡•Å‡§à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¶‡•ã‡§¨‡§æ‡§∞‡§æ ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§"
            : currentLanguage === "ta"
              ? "‡Æé‡Æ§‡Æø‡Æ∞‡Øç‡Æ™‡Ææ‡Æ∞‡Ææ‡Æ§ ‡Æ™‡Æø‡Æ¥‡Øà ‡Æè‡Æ±‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ. ‡Æ§‡ÆØ‡Æµ‡ØÅ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡ØÅ ‡ÆÆ‡ØÄ‡Æ£‡Øç‡Æü‡ØÅ‡ÆÆ‡Øç ‡ÆÆ‡ØÅ‡ÆØ‡Æ±‡Øç‡Æö‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç."
              : "Unexpected error occurred. Please try again.";
        statusMsg.classList.add("error");
      }
    });

    // ========= VISITOR COUNTER using page_visits =========
    async function trackPageView() {
      if (!visitorCounterEl) return;

      try {
        // 1) Insert a new visit row
        const { error: insertError } = await supabaseClient
          .from(PAGE_VISITS_TABLE)
          .insert([{}]); // assumes table has only id + created_at with default

        if (insertError) {
          console.error("Error inserting page_visits row:", insertError);
        }

        // 2) Count total visits
        const { count, error: countError } = await supabaseClient
          .from(PAGE_VISITS_TABLE)
          .select("*", { count: "exact", head: true });

        if (countError) {
          console.error("Error counting page_visits:", countError);
          return;
        }

        const total = count || 0;
        updateVisitorText(total);
      } catch (err) {
        console.error("Unexpected visitor counter error:", err);
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      trackPageView();
    });
  </script>
</body>
</html>
